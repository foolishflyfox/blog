# rollup 使用实战

rollup 是一个用于 js 的模块打包工具，其作用包括:

1. 高效的模块打包
    - ES Modules 支持：Rollup 对 ES Modules（ECMAScript 模块）有很好的支持。它可以将多个小的 ES Modules 模块合并成一个或几个优化后的文件，减少网络请求次数，提高应用的加载速度。
    - Tree-shaking：Rollup 能够进行有效的 “Tree-shaking”。这意味着它可以检测和去除未被使用的代码，只打包实际用到的代码，从而减小最终生成的包的大小。例如，如果一个模块中有多个函数，但你的项目只使用了其中一个函数，Rollup 会在打包过程中去除未使用的函数，减小包体积。
2. 代码优化和转换
    - 代码压缩：Rollup 可以与各种代码压缩工具集成，如 UglifyJS、terser 等，对打包后的代码进行压缩，去除不必要的空格、注释等，进一步减小包的大小。
    - 语法转换：通过插件，Rollup 可以进行语法转换，例如将新的 JavaScript 语法转换为旧版本浏览器能够理解的语法。例如，使用 Babel 插件可以将 ES6+ 的代码转换为 ES5 代码，以确保在旧浏览器中的兼容性。
3. 库和框架开发
   - 生成库文件：Rollup 非常适合用于开发 JavaScript 库。它可以生成多种格式的输出，如 CommonJS、UMD（通用模块定义）、ES Modules 等，方便你的库在不同的项目环境中使用。
   - 外部依赖处理：在开发库时，Rollup 可以轻松处理外部依赖。你可以指定哪些模块是外部依赖，不被打包进库文件中，而是在运行时从外部加载。这对于减小库的体积和避免重复打包常用的库非常有用。
4. 插件生态系统
   - 丰富的插件：Rollup 拥有一个活跃的插件生态系统，可以通过插件扩展其功能。例如，有插件可以处理 CSS 文件、图片资源、TypeScript 代码等。这使得 Rollup 可以适应各种项目需求，不仅仅局限于 JavaScript 模块打包。
   - 自定义构建流程：通过插件，你可以自定义 Rollup 的构建流程，添加特定的处理步骤或优化策略。例如，你可以在构建过程中进行代码分析、生成文档、自动添加版权信息等。

下面我们通过实战来分别说明上述作用。


